<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Streamless - Explore</title>
  <!-- Importing the Manrope font -->
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600&display=swap" rel="stylesheet">
  <!-- Chart.js CDN (for price charts) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Global Reset and Base Styles */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background-color: #e6e6e6;
      font-family: 'Manrope', sans-serif;
      color: #000;
      display: flex;
      min-height: 100vh;
    }
    /* Overall Layout */
    .container { display: flex; width: 100%; }
    /* Sidebar */
    .sidebar {
      width: 240px;
      background-color: #fff;
      padding: 20px;
      display: flex;
      flex-direction: column;
      box-shadow: 2px 0 4px rgba(0,0,0,0.1);
      position: fixed; top: 0; bottom: 0; left: 0;
    }
    .sidebar .logo { font-size: 24px; font-weight: 600; margin-bottom: 40px; cursor: pointer; }
    .nav-links { list-style: none; flex-grow: 1; }
    .nav-links li { margin-bottom: 20px; }
    .nav-links li a { text-decoration: none; color: #000; font-weight: 500; font-size: 16px; cursor: pointer; }
    /* Main Content */
    .main {
      margin-left: 240px;
      width: calc(100% - 240px);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    /* Top Player Bar with Apple Music style icons */
    .top-player {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #fff;
      padding: 15px 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .player-info { flex: 1; }
    .play-controls { flex: 1; text-align: center; }
    .account-info { flex: 1; text-align: right; }
    .player-details h3 { font-size: 18px; margin-bottom: 5px; }
    .player-details p { font-size: 14px; color: #555; }
    /* Using Apple Music–like Unicode icons */
    .play-controls button { font-size: 24px; margin: 0 10px; background: none; border: none; cursor: pointer; }
    /* Using ⏮ (&#9198;), ▶ (&#9654;), ⏭ (&#9197;) */
    .account-info button { font-size: 16px; background: none; border: none; cursor: pointer; }
    .account-info img { border-radius: 50%; width: 32px; height: 32px; vertical-align: middle; margin-right: 8px; }
    /* Content Sections */
    .content-section { padding: 20px; flex-grow: 1; overflow-y: auto; display: none; }
    .content-section.active { display: block; }
    /* Explore (acts as Home) */
    #explore { padding-top: 20px; }
    .explore-header h1 { font-size: 32px; font-weight: 600; margin-bottom: 10px; text-align: center; }
    .explore-header p { font-size: 16px; color: #555; text-align: center; margin-bottom: 20px; }
    .explore-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
    .card {
      background-color: #fff; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      display: flex; flex-direction: column; padding: 15px; cursor: pointer;
    }
    .card-content h2 { margin: 0 0 10px; font-size: 20px; font-weight: 600; }
    .card-content p { margin: 5px 0; font-size: 14px; color: #555; }
    .stats { margin-top: auto; border-top: 1px solid #eee; padding-top: 10px; font-size: 13px; color: #333; }
    .stats span { display: block; margin-bottom: 5px; }
    /* Recommended Section in Explore */
    .recommended {
      max-width: 600px; margin: 40px auto 0; padding: 15px;
      background-color: #fff; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .recommended h2 { font-size: 22px; margin-bottom: 10px; }
    .recommendation-card { cursor: pointer; }
    .recommendation-card h3 {
      font-size: 20px; margin-bottom: 5px; position: relative;
    }
    .recommendation-card h3 .ticket-price-label {
      background-color: #1DA1F2; color: #fff; padding: 4px 8px;
      border-radius: 8px; font-size: 14px; position: absolute; right: 0; top: 0;
    }
    /* Library Page (Playback-Focused: no action buttons) */
    #library h1 { text-align: center; margin-bottom: 20px; }
    .library-section {
      max-width: 600px; margin: 0 auto 20px; background-color: #fff;
      padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .library-section h2 { font-size: 20px; margin-bottom: 10px; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
    .library-section ul { list-style: none; padding: 0; }
    .library-section li {
      display: flex; justify-content: space-between; align-items: center;
      padding: 5px 0; border-bottom: 1px solid #eee; cursor: pointer;
    }
    .library-section li:last-child { border-bottom: none; }
    .item-name { flex: 2; }
    .item-price { flex: 1; text-align: right; }
    #createPlaylistBtn {
      display: block; margin: 10px auto; padding: 8px 16px;
      border: 1px solid #ccc; border-radius: 20px; background-color: #fff;
      cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    /* Portfolio Page (with action buttons) */
    #portfolio h1 { text-align: center; margin-bottom: 20px; }
    .portfolio-value { text-align: center; margin-bottom: 30px; }
    .portfolio-value h2 { font-size: 32px; margin: 10px 0; color: #000; }
    .portfolio-section {
      max-width: 600px; margin: 0 auto 20px; background-color: #fff;
      padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .portfolio-section h3 { font-size: 20px; margin-bottom: 10px; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
    .portfolio-section ul { list-style: none; padding: 0; }
    .portfolio-section li {
      display: flex; justify-content: space-between; align-items: center;
      padding: 5px 0; border-bottom: 1px solid #eee; cursor: pointer;
    }
    .portfolio-section li:last-child { border-bottom: none; }
    .item-actions { flex: 1; text-align: center; }
    .item-actions button {
      margin: 0 2px; padding: 4px 8px; background-color: #1DA1F2; color: #fff;
      border: none; border-radius: 4px; font-size: 12px; cursor: pointer;
    }
    /* Events Page */
    #events h1 { text-align: center; margin-bottom: 10px; }
    .event-list { max-width: 600px; margin: 0 auto 20px; }
    .event-list ul { list-style: none; padding: 0; margin: 0; }
    .event-item {
      display: flex; justify-content: space-between; align-items: center;
      background-color: #fff; padding: 10px 15px; margin-bottom: 10px;
      border-radius: 8px; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .event-item .event-info { display: flex; justify-content: space-between; width: 100%; }
    .event-title { font-size: 16px; font-weight: 600; }
    .event-seats-info {
      background-color: #1DA1F2; color: #fff; padding: 4px 8px;
      border-radius: 8px; font-size: 14px;
    }
    /* Event Details (Seating Layout) */
    .event-details { max-width: 600px; margin: 0 auto; display: none; }
    .stage {
      max-width: 600px; margin: 0 auto 20px; text-align: center;
      font-weight: bold; padding: 10px; background-color: #ccc;
      border-radius: 10px;
    }
    .theater {
      display: grid; grid-template-columns: repeat(10, 1fr); gap: 5px;
      max-width: 600px; margin: 0 auto 20px;
    }
    /* Seat styles with manual data-price attributes per row */
    .seat { background-color: #4CAF50; color: #fff; padding: 10px; text-align: center; cursor: pointer; border-radius: 4px; user-select: none; }
    .seat.unavailable { background-color: #ccc; cursor: not-allowed; }
    .seat.selected { background-color: #2196F3; }
    .checkout-summary { text-align: center; margin-top: 20px; }
    #totalPrice { font-size: 18px; margin-right: 10px; }
    .checkout-btn {
      padding: 10px 20px; font-size: 16px; border: none;
      border-radius: 20px; background-color: #000; color: #fff;
      cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .checkout-btn:hover { background-color: #333; }
    /* Modal Styles */
    .modal {
      display: none; position: fixed; z-index: 2000;
      left: 0; top: 0; width: 100%; height: 100%;
      overflow: auto; background-color: rgba(0,0,0,0.7);
    }
    .modal-content {
      background-color: #fff; margin: 10% auto;
      padding: 20px; border-radius: 8px; max-width: 600px;
      position: relative;
    }
    .close { position: absolute; top: 10px; right: 15px; font-size: 24px; cursor: pointer; }
    /* Sell Ticket Modal */
    #sellTicketModal .modal-content { max-width: 400px; }
    /* Playlist Modal */
    #playlistModal .modal-content { max-width: 400px; }
    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        position: relative; width: 100%; height: auto;
        flex-direction: row; align-items: center; justify-content: space-between;
        padding: 10px 20px; box-shadow: none;
      }
      .sidebar .logo { margin-bottom: 0; font-size: 20px; }
      .nav-links { display: flex; gap: 15px; }
      .main { margin-left: 0; width: 100%; }
      .top-player { flex-direction: column; align-items: center; }
      .play-controls { margin: 10px 0; }
      .account-info { text-align: center; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="logo">Streamless</div>
      <ul class="nav-links">
        <li><a data-page="explore">Explore</a></li>
        <li><a data-page="library">Library</a></li>
        <li><a data-page="portfolio">Portfolio</a></li>
        <li><a data-page="events">Events</a></li>
      </ul>
    </aside>
    <!-- Main Content Area -->
    <div class="main">
      <!-- Top Player Bar with Apple Music icons -->
      <header class="top-player">
        <div class="player-info">
          <div class="player-details">
            <h3>Song 1</h3>
            <p>Artist 1</p>
          </div>
        </div>
        <div class="play-controls">
          <button id="prevBtn">&#9198;</button>
          <button id="playBtn">&#9654;</button>
          <button id="nextBtn">&#9197;</button>
        </div>
        <div class="account-info">
          <button id="loginBtn">Login</button>
        </div>
      </header>
      
      <!-- Explore Section (acts as Home) -->
      <div id="explore" class="content-section active">
        <header class="explore-header">
          <h1>Explore New Music</h1>
          <p>Discover emerging tracks and artists ranked by their market cap and trading volume.</p>
        </header>
        <section class="explore-grid">
          <!-- Explore Song Cards (click to open chart modal) -->
          <div class="card" data-song="Song 1" data-marketcap="1200000000">
            <div class="card-content">
              <h2>Song 1</h2>
              <p>Artist 1</p>
              <div class="stats">
                <span>Market Cap: $1.2B</span>
                <span>Trading Volume: $150M</span>
              </div>
            </div>
          </div>
          <div class="card" data-song="Song 2" data-marketcap="900000000">
            <div class="card-content">
              <h2>Song 2</h2>
              <p>Artist 2</p>
              <div class="stats">
                <span>Market Cap: $900M</span>
                <span>Trading Volume: $120M</span>
              </div>
            </div>
          </div>
          <div class="card" data-song="Song 3" data-marketcap="750000000">
            <div class="card-content">
              <h2>Song 3</h2>
              <p>Artist 3</p>
              <div class="stats">
                <span>Market Cap: $750M</span>
                <span>Trading Volume: $95M</span>
              </div>
            </div>
          </div>
          <div class="card" data-song="Song 4" data-marketcap="600000000">
            <div class="card-content">
              <h2>Song 4</h2>
              <p>Artist 4</p>
              <div class="stats">
                <span>Market Cap: $600M</span>
                <span>Trading Volume: $80M</span>
              </div>
            </div>
          </div>
          <div class="card" data-song="Song 5" data-marketcap="450000000">
            <div class="card-content">
              <h2>Song 5</h2>
              <p>Artist 5</p>
              <div class="stats">
                <span>Market Cap: $450M</span>
                <span>Trading Volume: $65M</span>
              </div>
            </div>
          </div>
          <div class="card" data-song="Song 6" data-marketcap="300000000">
            <div class="card-content">
              <h2>Song 6</h2>
              <p>Artist 6</p>
              <div class="stats">
                <span>Market Cap: $300M</span>
                <span>Trading Volume: $50M</span>
              </div>
            </div>
          </div>
        </section>
        <!-- Recommended For You Section (click to redirect to Events and open seating layout) -->
        <div class="recommended">
          <h2>Recommended For You</h2>
          <div class="recommendation-card" id="recommendationCard">
            <h3>
              Artist 1 Live Concert 
              <span class="ticket-price-label">$60+</span>
            </h3>
            <p>Experience an exclusive live performance by Artist 1.</p>
          </div>
        </div>
      </div>
      
      <!-- Library Section (Playback-Focused) -->
      <div id="library" class="content-section">
        <h1>Library</h1>
        <div class="library-section">
          <h2>Playlists</h2>
          <button id="createPlaylistBtn">Create Playlist</button>
          <ul>
            <li class="playlist-item" style="cursor:pointer;">Example Playlist</li>
          </ul>
        </div>
        <div class="library-section">
          <h2>Songs</h2>
          <ul>
            <li class="library-song" data-price="0.005" style="cursor:pointer;">
              <span class="item-name">Song 1 - Artist 1</span>
              <span class="item-price">$0.005</span>
            </li>
            <li class="library-song" data-price="0.005" style="cursor:pointer;">
              <span class="item-name">Song 2 - Artist 2</span>
              <span class="item-price">$0.005</span>
            </li>
          </ul>
        </div>
        <div class="library-section">
          <h2>Artists</h2>
          <ul>
            <li style="cursor:pointer;">Artist 1</li>
            <li style="cursor:pointer;">Artist 2</li>
          </ul>
        </div>
      </div>
      
      <!-- Portfolio Section (with action buttons) -->
      <div id="portfolio" class="content-section">
        <h1>Portfolio</h1>
        <div class="portfolio-value">
          <h2>Total Portfolio Value: $180.01</h2>
        </div>
        <div class="portfolio-section">
          <h3>Songs Owned</h3>
          <ul>
            <li class="portfolio-song" data-price="0.005">
              <span class="item-name">Song 1 - Artist 1</span>
              <span class="item-actions">
                <button class="view-chart">Chart</button>
                <button class="sell-item">Sell</button>
              </span>
              <span class="item-price">$0.005</span>
            </li>
            <li class="portfolio-song" data-price="0.005">
              <span class="item-name">Song 2 - Artist 2</span>
              <span class="item-actions">
                <button class="view-chart">Chart</button>
                <button class="sell-item">Sell</button>
              </span>
              <span class="item-price">$0.005</span>
            </li>
          </ul>
        </div>
        <div class="portfolio-section">
          <h3>Event Tickets</h3>
          <ul>
            <li class="portfolio-ticket" data-floor="90">
              <span class="item-name">Artist 1 Live Concert - Seat A4</span>
              <span class="item-actions">
                <button class="view-chart">Chart</button>
                <button class="sell-item">Sell</button>
              </span>
              <span class="item-price">$90</span>
            </li>
            <li class="portfolio-ticket" data-floor="90">
              <span class="item-name">Artist 1 Live Concert - Seat A5</span>
              <span class="item-actions">
                <button class="view-chart">Chart</button>
                <button class="sell-item">Sell</button>
              </span>
              <span class="item-price">$90</span>
            </li>
          </ul>
        </div>
      </div>
      
      <!-- Events Section -->
      <div id="events" class="content-section">
        <h1>Events</h1>
        <div class="event-list">
          <ul>
            <li class="event-item" data-event="artistA" style="cursor:pointer;">
              <div class="event-info">
                <span class="event-title">Artist 1 Live Concert - May 17</span>
                <span class="event-seats-info">Tickets starting at $60</span>
              </div>
            </li>
          </ul>
        </div>
        <!-- Event Details: Seating layout with seat prices per row -->
        <div class="event-details" id="artistADetails" style="display: none;">
          <div class="stage">Stage</div>
          <div class="theater">
            <!-- Row A: $90 -->
            <div class="seat available" data-seat="A1" data-price="90">A1</div>
            <div class="seat available" data-seat="A2" data-price="90">A2</div>
            <div class="seat available" data-seat="A3" data-price="90">A3</div>
            <div class="seat available" data-seat="A4" data-price="90">A4</div>
            <div class="seat available" data-seat="A5" data-price="90">A5</div>
            <div class="seat available" data-seat="A6" data-price="90">A6</div>
            <div class="seat available" data-seat="A7" data-price="90">A7</div>
            <div class="seat available" data-seat="A8" data-price="90">A8</div>
            <div class="seat available" data-seat="A9" data-price="90">A9</div>
            <div class="seat available" data-seat="A10" data-price="90">A10</div>
            <!-- Row B: $80 -->
            <div class="seat available" data-seat="B1" data-price="80">B1</div>
            <div class="seat available" data-seat="B2" data-price="80">B2</div>
            <div class="seat available" data-seat="B3" data-price="80">B3</div>
            <div class="seat available" data-seat="B4" data-price="80">B4</div>
            <div class="seat available" data-seat="B5" data-price="80">B5</div>
            <div class="seat available" data-seat="B6" data-price="80">B6</div>
            <div class="seat available" data-seat="B7" data-price="80">B7</div>
            <div class="seat available" data-seat="B8" data-price="80">B8</div>
            <div class="seat available" data-seat="B9" data-price="80">B9</div>
            <div class="seat available" data-seat="B10" data-price="80">B10</div>
            <!-- Row C: $70 -->
            <div class="seat available" data-seat="C1" data-price="70">C1</div>
            <div class="seat available" data-seat="C2" data-price="70">C2</div>
            <div class="seat available" data-seat="C3" data-price="70">C3</div>
            <div class="seat available" data-seat="C4" data-price="70">C4</div>
            <div class="seat available" data-seat="C5" data-price="70">C5</div>
            <div class="seat available" data-seat="C6" data-price="70">C6</div>
            <div class="seat available" data-seat="C7" data-price="70">C7</div>
            <div class="seat available" data-seat="C8" data-price="70">C8</div>
            <div class="seat available" data-seat="C9" data-price="70">C9</div>
            <div class="seat available" data-seat="C10" data-price="70">C10</div>
            <!-- Row D: $60 -->
            <div class="seat available" data-seat="D1" data-price="60">D1</div>
            <div class="seat available" data-seat="D2" data-price="60">D2</div>
            <div class="seat available" data-seat="D3" data-price="60">D3</div>
            <div class="seat available" data-seat="D4" data-price="60">D4</div>
            <div class="seat available" data-seat="D5" data-price="60">D5</div>
            <div class="seat available" data-seat="D6" data-price="60">D6</div>
            <div class="seat available" data-seat="D7" data-price="60">D7</div>
            <div class="seat available" data-seat="D8" data-price="60">D8</div>
            <div class="seat available" data-seat="D9" data-price="60">D9</div>
            <div class="seat available" data-seat="D10" data-price="60">D10</div>
            <!-- Row E: $50 -->
            <div class="seat available" data-seat="E1" data-price="50">E1</div>
            <div class="seat available" data-seat="E2" data-price="50">E2</div>
            <div class="seat available" data-seat="E3" data-price="50">E3</div>
            <div class="seat available" data-seat="E4" data-price="50">E4</div>
            <div class="seat available" data-seat="E5" data-price="50">E5</div>
            <div class="seat available" data-seat="E6" data-price="50">E6</div>
            <div class="seat available" data-seat="E7" data-price="50">E7</div>
            <div class="seat available" data-seat="E8" data-price="50">E8</div>
            <div class="seat available" data-seat="E9" data-price="50">E9</div>
            <div class="seat available" data-seat="E10" data-price="50">E10</div>
          </div>
          <div class="checkout-summary">
            <span id="totalPrice">Total: $0</span>
            <button class="checkout-btn" id="checkoutBtn">Checkout ($0)</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Chart Modal (for Explore, Portfolio Song, and Ticket charts) -->
  <div id="chartModal" class="modal">
    <div class="modal-content">
      <span class="close" id="chartClose">&times;</span>
      <h2 id="chartTitle">Price Chart</h2>
      <canvas id="priceChart" width="400" height="200"></canvas>
    </div>
  </div>
  
  <!-- Sell Ticket Modal (for non-fungible ticket selling) -->
  <div id="sellTicketModal" class="modal">
    <div class="modal-content">
      <span class="close" id="sellTicketClose">&times;</span>
      <h2>Sell Ticket</h2>
      <p>Enter sale price for this ticket:</p>
      <input type="number" id="ticketSalePrice" placeholder="Price in $" style="width:100%; padding:10px; margin:10px 0;">
      <button id="confirmSellTicket" style="width:100%; padding:10px;">Confirm Sell</button>
    </div>
  </div>
  
  <!-- Playlist Modal (for creating/viewing playlists) -->
  <div id="playlistModal" class="modal">
    <div class="modal-content">
      <span class="close" id="playlistClose">&times;</span>
      <h2 id="playlistModalTitle">Playlist</h2>
      <div id="playlistContent"></div>
      <button id="confirmPlaylistBtn" style="width:100%; padding:10px; display:none;">Confirm</button>
    </div>
  </div>
  
  <script>
    // Helper to show one section only
    function showSection(sectionId) {
      const sections = document.querySelectorAll('.content-section');
      sections.forEach(sec => sec.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      // NAVIGATION
      const navLinks = document.querySelectorAll('.nav-links a');
      navLinks.forEach(link => {
        link.addEventListener('click', () => { showSection(link.getAttribute('data-page')); });
      });
      document.querySelector('.logo').addEventListener('click', () => { showSection('explore'); });
      
      // PLAY/PAUSE TOGGLE
      const playBtn = document.getElementById('playBtn');
      playBtn.addEventListener('click', function(e) {
        // Toggle between play (▶) and pause (⏸)
        if(this.innerText.trim() === '▶') {
          this.innerText = '⏸';
        } else {
          this.innerText = '▶';
        }
        e.stopPropagation();
      });
      
      // GET STARTED MODAL (if present)
      const getStartedBtn = document.getElementById('getStarted');
      if(getStartedBtn) {
        const getStartedModal = document.getElementById('getStartedModal');
        const getStartedClose = document.getElementById('getStartedClose');
        getStartedBtn.addEventListener('click', () => { getStartedModal.style.display = 'block'; });
        getStartedClose.addEventListener('click', () => { getStartedModal.style.display = 'none'; document.getElementById('createAccountForm').style.display = 'none'; });
      }
      const connectWalletBtn = document.getElementById('connectWalletBtn');
      connectWalletBtn.addEventListener('click', () => {
        const walletAddress = prompt("Enter your wallet address:");
        if(walletAddress) {
          const shortened = walletAddress.substring(0,6) + '...' + walletAddress.substring(walletAddress.length - 4);
          document.querySelector('.account-info').innerHTML = `<img src="https://via.placeholder.com/32" alt="Profile"/> <span>${shortened}</span>`;
          document.getElementById('getStartedModal').style.display = 'none';
        }
      });
      const showCreateAccountBtn = document.getElementById('showCreateAccountBtn');
      showCreateAccountBtn && showCreateAccountBtn.addEventListener('click', () => { document.getElementById('createAccountForm').style.display = 'block'; });
      const signupBtn = document.getElementById('signupBtn');
      signupBtn && signupBtn.addEventListener('click', () => {
        const email = document.getElementById('emailInput').value;
        if(email) {
          const username = email.split('@')[0];
          document.querySelector('.account-info').innerHTML = `<img src="https://via.placeholder.com/32" alt="Profile"/> <span>${username}</span>`;
          document.getElementById('getStartedModal').style.display = 'none';
        } else { alert("Please enter an email."); }
      });
      const gmailSignupBtn = document.getElementById('gmailSignupBtn');
      gmailSignupBtn && gmailSignupBtn.addEventListener('click', () => {
        const email = document.getElementById('emailInput').value;
        if(email) {
          const username = email.split('@')[0];
          document.querySelector('.account-info').innerHTML = `<img src="https://via.placeholder.com/32" alt="Profile"/> <span>${username}</span>`;
          document.getElementById('getStartedModal').style.display = 'none';
        } else { alert("Please enter your Gmail address."); }
      });
      
      // CHART MODAL FUNCTIONALITY
      const chartModal = document.getElementById('chartModal');
      const chartClose = document.getElementById('chartClose');
      const chartTitle = document.getElementById('chartTitle');
      let priceChart;
      const dummyLabels = ['Mar 17','Mar 18','Mar 19','Mar 20','Mar 21','Mar 22'];
      function generateDummyData(basePrice) {
        const data = [];
        for(let i = 0; i < dummyLabels.length; i++){
          const fluctuation = 1 + (Math.random() * 0.2 - 0.1);
          data.push(parseFloat((basePrice * fluctuation).toFixed(8)));
        }
        return data;
      }
      function showPortfolioSongChart(element) {
        const basePrice = parseFloat(element.getAttribute('data-price'));
        chartTitle.textContent = element.querySelector('.item-name').textContent + ' Price Chart';
        chartModal.style.display = 'block';
        const dummyData = generateDummyData(basePrice);
        if(priceChart) { priceChart.destroy(); }
        const ctx = document.getElementById('priceChart').getContext('2d');
        priceChart = new Chart(ctx, {
          type: 'line',
          data: { labels: dummyLabels, datasets: [{ label: 'Price (in USD)', data: dummyData, fill: false, borderColor: 'black', tension: 0.1 }] },
          options: { scales: { y: { beginAtZero: true, ticks: { callback: value => '$' + parseFloat(value.toFixed(8)).toString() } } },
                     plugins: { tooltip: { callbacks: { label: context => '$' + parseFloat(context.parsed.y.toFixed(8)).toString() } } } }
        });
      }
      function showPortfolioTicketChart(element) {
        const floorPrice = parseFloat(element.getAttribute('data-floor'));
        chartTitle.textContent = element.querySelector('.item-name').textContent + ' Price Chart';
        chartModal.style.display = 'block';
        const dummyData = generateDummyData(floorPrice);
        if(priceChart) { priceChart.destroy(); }
        const ctx = document.getElementById('priceChart').getContext('2d');
        priceChart = new Chart(ctx, {
          type: 'line',
          data: { labels: dummyLabels, datasets: [{ label: 'Price (in USD)', data: dummyData, fill: false, borderColor: 'black', tension: 0.1 }] },
          options: { scales: { y: { beginAtZero: true, ticks: { callback: value => '$' + parseFloat(value.toFixed(8)).toString() } } },
                     plugins: { tooltip: { callbacks: { label: context => '$' + parseFloat(context.parsed.y.toFixed(8)).toString() } } } }
        });
      }
      chartClose.addEventListener('click', () => { chartModal.style.display = 'none'; });
      window.addEventListener('click', event => { if(event.target == chartModal){ chartModal.style.display = 'none'; } });
      
      // Explore cards: Clicking a card shows its chart popup
      const cards = document.querySelectorAll('.card');
      cards.forEach(card => {
        card.addEventListener('click', () => {
          const song = card.getAttribute('data-song');
          const marketCap = parseFloat(card.getAttribute('data-marketcap'));
          const basePrice = marketCap / 1e14;
          chartTitle.textContent = song + ' Token Price Chart';
          chartModal.style.display = 'block';
          const dummyData = generateDummyData(basePrice);
          if(priceChart){ priceChart.destroy(); }
          const ctx = document.getElementById('priceChart').getContext('2d');
          priceChart = new Chart(ctx, {
            type: 'line',
            data: { labels: dummyLabels, datasets: [{ label: 'Price (in USD)', data: dummyData, fill: false, borderColor: 'black', tension: 0.1 }] },
            options: { scales: { y: { beginAtZero: true, ticks: { callback: value => '$' + parseFloat(value.toFixed(8)).toString() } } },
                       plugins: { tooltip: { callbacks: { label: context => '$' + parseFloat(context.parsed.y.toFixed(8)).toString() } } } }
          });
        });
      });
      
      // Recommended For You: Clicking redirects to Events and opens seating layout
      const recommendationCard = document.getElementById('recommendationCard');
      recommendationCard.addEventListener('click', () => {
        showSection('events');
        const eventItem = document.querySelector('.event-item');
        if(eventItem) { eventItem.click(); }
      });
      
      // Portfolio: Attach action buttons for songs and tickets
      const attachActionButtons = (selector, isTicket) => {
        const items = document.querySelectorAll(selector);
        items.forEach(item => {
          // View Chart button
          item.querySelector('.view-chart').addEventListener('click', e => {
            e.stopPropagation();
            if(isTicket) { showPortfolioTicketChart(item); }
            else { showPortfolioSongChart(item); }
          });
          // Sell button
          item.querySelector('.sell-item').addEventListener('click', e => {
            e.stopPropagation();
            if(isTicket) {
              sellTicketModal.style.display = 'block';
              currentTicketItem = item;
            } else {
              if(confirm("Do you want to sell this song?")) { alert("Song listed for sale (simulated)."); }
            }
          });
        });
      };
      attachActionButtons('.portfolio-song', false);
      attachActionButtons('.portfolio-ticket', true);
      
      // Playlist Modal for Create & View Playlist
      const playlistModal = document.getElementById('playlistModal');
      const playlistClose = document.getElementById('playlistClose');
      const playlistModalTitle = document.getElementById('playlistModalTitle');
      const playlistContent = document.getElementById('playlistContent');
      const confirmPlaylistBtn = document.getElementById('confirmPlaylistBtn');
      document.getElementById('createPlaylistBtn').addEventListener('click', () => {
        playlistModalTitle.textContent = "Create Playlist";
        playlistContent.innerHTML = `<p>Enter playlist name:</p>
          <input type="text" id="playlistName" placeholder="Playlist Name" style="width:100%; padding:10px;">`;
        confirmPlaylistBtn.style.display = 'block';
        playlistModal.style.display = 'block';
      });
      document.querySelector('.playlist-item').addEventListener('click', () => {
        playlistModalTitle.textContent = "Example Playlist";
        playlistContent.innerHTML = `<ul>
          <li>Song 1 - Artist 1</li>
          <li>Song 2 - Artist 2</li>
        </ul>`;
        confirmPlaylistBtn.style.display = 'none';
        playlistModal.style.display = 'block';
      });
      playlistClose.addEventListener('click', () => { playlistModal.style.display = 'none'; });
      confirmPlaylistBtn.addEventListener('click', () => {
        const name = document.getElementById('playlistName').value;
        if(name) { alert("Playlist '" + name + "' created (simulated)."); playlistModal.style.display = 'none'; }
        else { alert("Please enter a playlist name."); }
      });
      
      // Sell Ticket Modal for concert tickets
      const sellTicketModal = document.getElementById('sellTicketModal');
      const sellTicketClose = document.getElementById('sellTicketClose');
      let currentTicketItem = null;
      document.getElementById('confirmSellTicket').addEventListener('click', () => {
        const price = document.getElementById('ticketSalePrice').value;
        if(price && parseFloat(price) > 0) {
          alert("Ticket listed for sale at $" + price + " (simulated).");
          sellTicketModal.style.display = 'none';
          document.getElementById('ticketSalePrice').value = "";
        } else { alert("Please enter a valid sale price."); }
      });
      sellTicketClose.addEventListener('click', () => { sellTicketModal.style.display = 'none'; });
      window.addEventListener('click', event => { if(event.target == sellTicketModal){ sellTicketModal.style.display = 'none'; } });
      
      // Player buttons for previous/next
      document.getElementById('prevBtn').addEventListener('click', () => { alert('Previous track (simulated).'); });
      document.getElementById('nextBtn').addEventListener('click', () => { alert('Next track (simulated).'); });
      
      // EVENTS SECTION - Event List: Toggle seating layout on row click
      const eventItems = document.querySelectorAll('.event-item');
      eventItems.forEach(item => {
        item.addEventListener('click', () => {
          const details = document.getElementById('artistADetails');
          details.style.display = details.style.display === 'block' ? 'none' : 'block';
        });
      });
      
      // EVENTS SECTION - Theater Seat Selection & Checkout
      let selectedSeats = [];
      const seatElements = document.querySelectorAll('.theater .seat.available');
      seatElements.forEach(seat => {
        seat.addEventListener('click', e => {
          e.stopPropagation(); // prevent toggling event layout
          if(seat.classList.contains('selected')) {
            seat.classList.remove('selected');
            selectedSeats = selectedSeats.filter(s => s !== seat.getAttribute('data-seat'));
          } else {
            seat.classList.add('selected');
            selectedSeats.push(seat.getAttribute('data-seat'));
          }
          updateTotalPrice();
        });
      });
      function updateTotalPrice() {
        let total = 0;
        seatElements.forEach(seat => { if(seat.classList.contains('selected')) { total += parseFloat(seat.getAttribute('data-price')); } });
        document.getElementById('totalPrice').textContent = "Total: $" + total;
        document.getElementById('checkoutBtn').textContent = "Checkout ($" + total + ")";
      }
      const checkoutBtn = document.getElementById('checkoutBtn');
      const checkoutModal = document.getElementById('checkoutModal');
      const checkoutClose = document.getElementById('checkoutClose');
      const selectedSeatsSummary = document.getElementById('selectedSeatsSummary');
      const finalPriceDisplay = document.getElementById('finalPrice');
      checkoutBtn.addEventListener('click', () => {
        if(selectedSeats.length === 0) { alert("Please select at least one seat."); }
        else {
          selectedSeatsSummary.innerHTML = "<p>Selected Seats: " + selectedSeats.join(', ') + "</p>";
          let total = 0;
          seatElements.forEach(seat => { if(seat.classList.contains('selected')) { total += parseFloat(seat.getAttribute('data-price')); } });
          finalPriceDisplay.textContent = "Total Price: $" + total;
          checkoutModal.style.display = 'block';
        }
      });
      checkoutClose.addEventListener('click', () => { checkoutModal.style.display = 'none'; });
      window.addEventListener('click', event => { if(event.target == checkoutModal){ checkoutModal.style.display = 'none'; } });
      document.getElementById('confirmPurchaseBtn').addEventListener('click', () => {
        alert("Purchase successful! (NFT transaction simulated.)");
        seatElements.forEach(seat => seat.classList.remove('selected'));
        selectedSeats = [];
        updateTotalPrice();
        checkoutModal.style.display = 'none';
      });
    });
  </script>
</body>
</html>
