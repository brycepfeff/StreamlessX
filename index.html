<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Streamless - Explore</title>
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="Favicon.svg">
  <!-- Import Manrope font -->
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600&display=swap" rel="stylesheet">
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Global Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background-color: #ffffff; font-family: 'Manrope', sans-serif; color: #000; display: flex; min-height: 100vh; }
    .container { display: flex; width: 100%; }

    /* Desktop Styles (unchanged layout) */
    .sidebar {
      width: 240px;
      background-color: #fff;
      padding: 20px;
      display: flex;
      flex-direction: column;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
      position: fixed; top: 0; bottom: 0; left: 0;
    }
    .nav-links li a { padding-left: 10px; }
    .logo { width: 180px; margin-bottom: 40px; cursor: pointer; }
    .nav-links { list-style: none; flex-grow: 1; }
    .nav-links li { margin-bottom: 20px; }
    .nav-links li a { text-decoration: none; color: #000; font-weight: 500; font-size: 16px; cursor: pointer; }
    .main { margin-left: 240px; width: calc(100% - 240px); display: flex; flex-direction: column; min-height: 100vh; }
    .top-player {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #fff;
      padding: 15px 20px;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
      min-height: 60px;
    }
    .player-info { flex: 1; }
    .play-controls { flex: 1; text-align: center; }
    .account-info { flex: 1; text-align: right; }
    .player-details h3 { font-size: 18px; margin-bottom: 5px; }
    .player-details p { font-size: 14px; color: #555; }
    /* Replace text login with profile icon */
    .account-info #loginBtn {
      cursor: pointer;
      width: 32px;
      height: 32px;
    }
    .account-info #loginBtn img { width: 100%; height: 100%; object-fit: contain; }
    .play-controls button, .account-info button { background: none; border: none; cursor: pointer; }
    .play-controls button { font-size: 24px; margin: 0 10px; min-width: 40px; }
    .account-info button { font-size: 16px; }
    .account-info img { border-radius: 50%; width: 32px; height: 32px; vertical-align: middle; margin-right: 8px; }
    .content-section { padding: 20px; flex-grow: 1; overflow-y: auto; display: none; }
    .content-section.active { display: block; }
    #explore { padding-top: 20px; }
    .explore-header h1 { font-size: 32px; font-weight: 600; margin-bottom: 10px; text-align: center; }
    .explore-header p { font-size: 16px; color: #555; text-align: center; margin-bottom: 20px; }
    .explore-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
    /* Updated Explore Card Layout */
    .card {
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
      display: flex;
      flex-direction: column;
      padding: 15px;
      cursor: pointer;
    }
    .card-content .row1,
    .card-content .row2 {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .card-content .row1 .song-artist { font-size: 18px; font-weight: 600; }
    .card-content .row1 .price { font-size: 18px; font-weight: bold; color: #000; }
    .card-content .row2 { margin-top: 8px; font-size: 14px; color: #555; }
    .card-content .row2 .market-cap,
    .card-content .row2 .volume { }
    /* End Explore Card Layout */
    .recommended {
      max-width: 600px;
      margin: 40px auto 0;
      padding: 15px;
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
    }
    .recommended h2 { font-size: 22px; margin-bottom: 10px; }
    .recommendation-card { cursor: pointer; }
    .recommendation-card h3 {
      font-size: 20px;
      margin-bottom: 5px;
      position: relative;
    }
    .ticket-price-label {
      background-color: #1DA1F2;
      color: #fff;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 14px;
      position: absolute;
      right: 0;
      top: 0;
    }
    #library h1 { text-align: center; margin-bottom: 20px; }
    .library-section {
      max-width: 600px;
      margin: 0 auto 20px;
      background-color: #fff;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
    }
    .library-section h2 {
      font-size: 20px;
      margin-bottom: 10px;
      border-bottom: 2px solid #f7f7f7;
      padding-bottom: 5px;
      text-align: center;
    }
    .library-section ul { list-style: none; padding: 0; }
    .library-section li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 2px solid #f7f7f7;
      cursor: pointer;
    }
    .library-section li:last-child { border-bottom: none; }
    .item-name { flex: 2; }
    .item-price { flex: 1; text-align: right; }
    #createPlaylistBtn {
      display: block;
      margin: 10px auto;
      padding: 8px 16px;
      border: 1px solid #ccc;
      border-radius: 20px;
      background-color: #fff;
      cursor: pointer;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
    }
    #portfolio h1 { text-align: center; margin-bottom: 20px; }
    .portfolio-value { text-align: center; margin-bottom: 30px; }
    .portfolio-value h2 { font-size: 32px; margin: 10px 0; color: #000; }
    .portfolio-section {
      max-width: 600px;
      margin: 0 auto 20px;
      background-color: #fff;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
    }
    .portfolio-section h3 {
      font-size: 20px;
      margin-bottom: 10px;
      border-bottom: 2px solid #f7f7f7;
      padding-bottom: 5px;
      text-align: center;
    }
    .portfolio-section ul { list-style: none; padding: 0; }
    .portfolio-section li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 2px solid #f7f7f7;
      cursor: pointer;
    }
    .portfolio-section li:last-child { border-bottom: none; }
    .item-actions { flex: 1; text-align: center; }
    .item-actions button {
      margin: 0 2px;
      padding: 4px 8px;
      background-color: #1DA1F2;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      width: 60px;
      text-align: center;
    }
    #events h1 { text-align: center; margin-bottom: 10px; }
    .event-list { max-width: 600px; margin: 0 auto 20px; }
    .event-list ul { list-style: none; padding: 0; margin: 0; }
    .event-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #fff;
      padding: 10px 15px;
      margin-bottom: 10px;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
    }
    .event-item .event-info { display: flex; justify-content: space-between; width: 100%; }
    .event-details { max-width: 600px; margin: 0 auto; display: none; }
    .theater { display: grid; grid-template-columns: repeat(10, 1fr); gap: 5px; margin-bottom: 10px; }
    .seat {
      background-color: #4CAF50;
      color: #fff;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      border-radius: 4px;
      user-select: none;
    }
    .seat.unavailable { background-color: #ccc; cursor: not-allowed; }
    .seat.selected { background-color: #2196F3; }
    #totalPrice { font-size: 18px; margin-right: 10px; }
    .checkout-btn {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 20px;
      background-color: #000;
      color: #fff;
      cursor: pointer;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
    }
    .checkout-btn:hover { background-color: #333; }
    #venueCreatorModal .modal-content { max-width: 800px; }
    #venueCreatorContent { margin-bottom: 20px; }
    #venueCreatorContent label { margin-right: 5px; font-weight: 500; }
    #venueCreatorContent input { margin-right: 10px; padding: 5px; border: 1px solid #ccc; border-radius: 5px; }
    #venueCreatorContent > div:first-child { text-align: center; margin-bottom: 10px; }
    #venueCreatorContent > div:nth-child(2) { text-align: center; margin-bottom: 10px; }
    #toolbar { text-align: center; margin-bottom:10px; }
    #toolbar button {
      margin-right: 5px; padding: 5px 10px; border: none;
      background-color: #007aff; color: #fff; border-radius: 5px;
      cursor: pointer; font-size: 14px;
    }
    #toolbar button:hover { background-color: #0051a8; }
    #venueGridContainer { margin-top: 10px; }
    #venueGridContainer table { width: 100%; border-collapse: collapse; }
    #venueGridContainer td {
      border: 2px solid #f7f7f7; width: 40px; height: 40px;
      text-align: center; vertical-align: middle; cursor: pointer;
    }
    .venue-buttons { text-align: center; margin-top: 10px; }
    .venue-buttons button { width: 30%; padding: 10px; margin: 0 2%; border-radius: 5px; }
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.7);
    }
    .modal-content {
      background-color: #fff;
      margin: 10% auto;
      padding: 20px;
      border-radius: 12px;
      max-width: 600px;
      position: relative;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
    }
    .close { position: absolute; top: 10px; right: 15px; font-size: 24px; cursor: pointer; }
    #sellTicketModal .modal-content { max-width: 400px; }
    #playlistModal .modal-content { max-width: 400px; }

    /* Global Stage and Checkout Summary Styles */
    .stage {
      width: 100%;
      text-align: center;
      padding: 15px;
      background-color: #eee;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
      margin-bottom: 10px;
      font-weight: bold;
    }
    .checkout-summary {
      text-align: center;
      margin-top: 10px;
    }
    .checkout-summary span, .checkout-summary button {
      display: inline-block;
      margin: 0 10px;
    }

    /* Hide mobile-only elements by default */
    .mobile-header,
    .mobile-nav,
    .mobile-play-bar {
      display: none;
    }

    /* Mobile Only Styles */
    @media (max-width: 768px) {
      /* Hide desktop sidebar and top-player on mobile */
      .sidebar,
      .top-player { display: none; }
      .main {
        margin-left: 0;
        width: 100%;
        padding-top: 60px; /* space for mobile header */
        padding-bottom: 70px; /* space for mobile play bar */
      }
      /* Mobile Header with space-between layout */
      .mobile-header {
        display: flex;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background-color: #fff;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
        box-shadow: 0 0 8px rgba(0,0,0,0.15);
        z-index: 1100;
      }
      .mobile-nav-toggle {
        font-size: 32px; /* 20% smaller than 40px */
        width: 32px;
        height: 32px;
        line-height: 32px;
        cursor: pointer;
      }
      .mobile-profile {
        width: 32px;
        height: 32px;
        object-fit: contain;
        cursor: pointer;
      }
      .mobile-logo {
        max-height: 40px;
        object-fit: contain;
      }
      /* Mobile Dropdown Navigation: full-width, centered, with rounded bottom edges */
      .mobile-nav {
        display: none;
        position: fixed;
        top: 60px;
        left: 0;
        width: 100%;
        background: #fff;
        box-shadow: 0 0 8px rgba(0,0,0,0.15);
        z-index: 1090;
        text-align: center;
        border-bottom-left-radius: 12px;
        border-bottom-right-radius: 12px;
      }
      .mobile-nav ul {
        list-style: none;
        padding: 10px;
        margin: 0;
      }
      .mobile-nav ul li {
        padding: 10px 20px;
        border-bottom: 2px solid #f7f7f7;
      }
      .mobile-nav ul li a {
        text-decoration: none;
        color: #000;
        font-size: 16px;
      }
      /* Mobile Play Bar */
      .mobile-play-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background-color: #fff;
        padding: 10px 20px;
        box-shadow: 0 0 8px rgba(0,0,0,0.15);
        z-index: 1000;
      }
      .mobile-play-bar .mobile-player-info h3 {
        font-size: 16px;
        margin: 0;
      }
      .mobile-play-bar .mobile-player-info p {
        font-size: 12px;
        margin: 0;
      }
      .mobile-play-bar .mobile-play-controls button {
        background: none;
        border: none;
        font-size: 20px;
        margin: 0 5px;
        cursor: pointer;
      }
      /* Constrain seat grid on mobile */
      .theater {
        max-width: 100%;
        overflow-x: auto;
      }
      .seat {
        padding: 5px;
        font-size: 12px;
      }
      /* Display mobile-only elements */
      .mobile-header,
      .mobile-play-bar { display: flex; }
    }
  </style>
</head>
<body>
  <!-- Mobile Header (Visible on Mobile Only) -->
  <header class="mobile-header">
    <div class="mobile-nav-toggle">&#9776;</div>
    <img src="Favicon.svg" alt="Streamless" class="mobile-logo">
    <img src="profile.svg" alt="Profile" class="mobile-profile">
  </header>
  <!-- Mobile Navigation Dropdown -->
  <nav class="mobile-nav">
    <ul>
      <li><a data-page="explore">Explore</a></li>
      <li><a data-page="library">Library</a></li>
      <li><a data-page="portfolio">Portfolio</a></li>
      <li><a data-page="events">Events</a></li>
    </ul>
  </nav>
  
  <div class="container">
    <!-- Desktop Sidebar Navigation (Unchanged) -->
    <aside class="sidebar">
      <img src="Streamless.svg" alt="Streamless" class="logo" onclick="showSection('explore')">
      <ul class="nav-links">
        <li><a data-page="explore">Explore</a></li>
        <li><a data-page="library">Library</a></li>
        <li><a data-page="portfolio">Portfolio</a></li>
        <li><a data-page="events">Events</a></li>
      </ul>
    </aside>
    <!-- Main Content Area (Desktop remains unchanged) -->
    <div class="main">
      <!-- Desktop Top Player Bar (Unchanged except Login button replacement) -->
      <header class="top-player">
        <div class="player-info">
          <div class="player-details">
            <h3>Song 1</h3>
            <p>Artist 1</p>
          </div>
        </div>
        <div class="play-controls">
          <button id="prevBtn">&#9198;</button>
          <button id="playBtn">&#9654;</button>
          <button id="nextBtn">&#9197;</button>
        </div>
        <div class="account-info">
          <!-- Replace text login with profile icon -->
          <img id="loginBtn" src="profile.svg" alt="Profile" style="cursor: pointer; width: 32px; height: 32px;">
        </div>
      </header>
      
      <!-- Explore Section -->
      <div id="explore" class="content-section active">
        <header class="explore-header">
          <h1>Explore New Music</h1>
          <p>Discover emerging tracks and artists ranked by their market cap and trading volume.</p>
        </header>
        <section class="explore-grid">
          <!-- Updated Explore Song Cards -->
          <div class="card" data-song="Song 1" data-marketcap="1200000000">
            <div class="card-content">
              <div class="row1" style="display:flex; justify-content: space-between; align-items: center;">
                <div class="song-artist">Song 1 - Artist 1</div>
                <div class="price" style="font-size:18px; font-weight:bold; color:#000;"></div>
              </div>
              <div class="row2" style="display:flex; justify-content: space-between; margin-top:8px; font-size:14px; color:#555;">
                <div class="market-cap">Market Cap: $1.2B</div>
                <div class="volume">Trading Volume: $150M</div>
              </div>
            </div>
          </div>
          <div class="card" data-song="Song 2" data-marketcap="900000000">
            <div class="card-content">
              <div class="row1" style="display:flex; justify-content: space-between; align-items: center;">
                <div class="song-artist">Song 2 - Artist 2</div>
                <div class="price" style="font-size:18px; font-weight:bold; color:#000;"></div>
              </div>
              <div class="row2" style="display:flex; justify-content: space-between; margin-top:8px; font-size:14px; color:#555;">
                <div class="market-cap">Market Cap: $900M</div>
                <div class="volume">Trading Volume: $120M</div>
              </div>
            </div>
          </div>
          <div class="card" data-song="Song 3" data-marketcap="750000000">
            <div class="card-content">
              <div class="row1" style="display:flex; justify-content: space-between; align-items: center;">
                <div class="song-artist">Song 3 - Artist 3</div>
                <div class="price" style="font-size:18px; font-weight:bold; color:#000;"></div>
              </div>
              <div class="row2" style="display:flex; justify-content: space-between; margin-top:8px; font-size:14px; color:#555;">
                <div class="market-cap">Market Cap: $750M</div>
                <div class="volume">Trading Volume: $95M</div>
              </div>
            </div>
          </div>
          <div class="card" data-song="Song 4" data-marketcap="600000000">
            <div class="card-content">
              <div class="row1" style="display:flex; justify-content: space-between; align-items: center;">
                <div class="song-artist">Song 4 - Artist 4</div>
                <div class="price" style="font-size:18px; font-weight:bold; color:#000;"></div>
              </div>
              <div class="row2" style="display:flex; justify-content: space-between; margin-top:8px; font-size:14px; color:#555;">
                <div class="market-cap">Market Cap: $600M</div>
                <div class="volume">Trading Volume: $80M</div>
              </div>
            </div>
          </div>
          <div class="card" data-song="Song 5" data-marketcap="450000000">
            <div class="card-content">
              <div class="row1" style="display:flex; justify-content: space-between; align-items: center;">
                <div class="song-artist">Song 5 - Artist 5</div>
                <div class="price" style="font-size:18px; font-weight:bold; color:#000;"></div>
              </div>
              <div class="row2" style="display:flex; justify-content: space-between; margin-top:8px; font-size:14px; color:#555;">
                <div class="market-cap">Market Cap: $450M</div>
                <div class="volume">Trading Volume: $65M</div>
              </div>
            </div>
          </div>
          <div class="card" data-song="Song 6" data-marketcap="300000000">
            <div class="card-content">
              <div class="row1" style="display:flex; justify-content: space-between; align-items: center;">
                <div class="song-artist">Song 6 - Artist 6</div>
                <div class="price" style="font-size:18px; font-weight:bold; color:#000;"></div>
              </div>
              <div class="row2" style="display:flex; justify-content: space-between; margin-top:8px; font-size:14px; color:#555;">
                <div class="market-cap">Market Cap: $300M</div>
                <div class="volume">Trading Volume: $50M</div>
              </div>
            </div>
          </div>
        </section>
        <!-- Recommended For You Section with Inline Seating Popup -->
        <div class="recommended">
          <h2>Recommended For You</h2>
          <div class="recommendation-card" id="recommendationCard">
            <h3>
              Artist 1 Live Concert 
              <span class="ticket-price-label">$50+</span>
            </h3>
            <p>Experience an exclusive live performance by Artist 1.</p>
          </div>
          <!-- Inline seating popup below the recommendation -->
          <div id="recommendedSeating" style="display:none;">
            <div class="stage">Stage</div>
            <div class="theater">
              <!-- Row A: $90; A4 and A5 unavailable -->
              <div class="seat available" data-seat="A1" data-price="90">A1</div>
              <div class="seat available" data-seat="A2" data-price="90">A2</div>
              <div class="seat available" data-seat="A3" data-price="90">A3</div>
              <div class="seat available unavailable" data-seat="A4" data-price="90">A4</div>
              <div class="seat available unavailable" data-seat="A5" data-price="90">A5</div>
              <div class="seat available" data-seat="A6" data-price="90">A6</div>
              <div class="seat available" data-seat="A7" data-price="90">A7</div>
              <div class="seat available" data-seat="A8" data-price="90">A8</div>
              <div class="seat available" data-seat="A9" data-price="90">A9</div>
              <div class="seat available" data-seat="A10" data-price="90">A10</div>
              <!-- Row B: $80; B3 unavailable -->
              <div class="seat available" data-seat="B1" data-price="80">B1</div>
              <div class="seat available" data-seat="B2" data-price="80">B2</div>
              <div class="seat available unavailable" data-seat="B3" data-price="80">B3</div>
              <div class="seat available" data-seat="B4" data-price="80">B4</div>
              <div class="seat available" data-seat="B5" data-price="80">B5</div>
              <div class="seat available" data-seat="B6" data-price="80">B6</div>
              <div class="seat available" data-seat="B7" data-price="80">B7</div>
              <div class="seat available" data-seat="B8" data-price="80">B8</div>
              <div class="seat available" data-seat="B9" data-price="80">B9</div>
              <div class="seat available" data-seat="B10" data-price="80">B10</div>
              <!-- Row C: $70 -->
              <div class="seat available" data-seat="C1" data-price="70">C1</div>
              <div class="seat available" data-seat="C2" data-price="70">C2</div>
              <div class="seat available" data-seat="C3" data-price="70">C3</div>
              <div class="seat available" data-seat="C4" data-price="70">C4</div>
              <div class="seat available" data-seat="C5" data-price="70">C5</div>
              <div class="seat available" data-seat="C6" data-price="70">C6</div>
              <div class="seat available" data-seat="C7" data-price="70">C7</div>
              <div class="seat available" data-seat="C8" data-price="70">C8</div>
              <div class="seat available" data-seat="C9" data-price="70">C9</div>
              <div class="seat available" data-seat="C10" data-price="70">C10</div>
              <!-- Row D: $60; D6 and D8 unavailable -->
              <div class="seat available" data-seat="D1" data-price="60">D1</div>
              <div class="seat available" data-seat="D2" data-price="60">D2</div>
              <div class="seat available" data-seat="D3" data-price="60">D3</div>
              <div class="seat available" data-seat="D4" data-price="60">D4</div>
              <div class="seat available" data-seat="D5" data-price="60">D5</div>
              <div class="seat available unavailable" data-seat="D6" data-price="60">D6</div>
              <div class="seat available" data-seat="D7" data-price="60">D7</div>
              <div class="seat available unavailable" data-seat="D8" data-price="60">D8</div>
              <div class="seat available" data-seat="D9" data-price="60">D9</div>
              <div class="seat available" data-seat="D10" data-price="60">D10</div>
              <!-- Row E: $50; E2 unavailable -->
              <div class="seat available" data-seat="E1" data-price="50">E1</div>
              <div class="seat available unavailable" data-seat="E2" data-price="50">E2</div>
              <div class="seat available" data-seat="E3" data-price="50">E3</div>
              <div class="seat available" data-seat="E4" data-price="50">E4</div>
              <div class="seat available" data-seat="E5" data-price="50">E5</div>
              <div class="seat available" data-seat="E6" data-price="50">E6</div>
              <div class="seat available" data-seat="E7" data-price="50">E7</div>
              <div class="seat available" data-seat="E8" data-price="50">E8</div>
              <div class="seat available" data-seat="E9" data-price="50">E9</div>
              <div class="seat available" data-seat="E10" data-price="50">E10</div>
            </div>
            <div class="checkout-summary">
              <span id="totalPrice">Total: $0</span>
              <button class="checkout-btn" id="checkoutBtn">Checkout ($0)</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Playlist Modal -->
      <div id="playlistModal" class="modal">
        <div class="modal-content">
          <span class="close" id="playlistClose">&times;</span>
          <h2 id="playlistModalTitle">Playlist 1</h2>
          <div id="playlistContent">
            <ul style="padding:10px;">
              <li style="padding:10px; border-bottom:2px solid #f7f7f7;">Song 1 - Artist 1</li>
              <li style="padding:10px;">Song 2 - Artist 2</li>
            </ul>
          </div>
          <button id="confirmPlaylistBtn" style="width:100%; padding:10px; display:none;">Confirm</button>
        </div>
      </div>
      
      <!-- Venue Creator Modal -->
      <div id="venueCreatorModal" class="modal">
        <div class="modal-content">
          <span class="close" id="venueCreatorClose">&times;</span>
          <h2 style="text-align:center;">Venue Creator</h2>
          <div id="venueCreatorContent">
            <!-- Row 1: Grid Rows & Columns, Create Grid and Start Over -->
            <div style="text-align: center; margin-bottom: 10px;">
              <label for="gridRows">Grid Rows:</label>
              <input type="number" id="gridRows" value="5" min="1" style="border-radius:5px; padding:5px;">
              <label for="gridCols">Grid Columns:</label>
              <input type="number" id="gridCols" value="5" min="1" style="border-radius:5px; padding:5px;">
              <button id="createGridBtn" style="padding: 5px 10px; border-radius:5px;">Create Grid</button>
              <button id="resetVenueBtn" style="padding: 5px 10px; border-radius:5px;">Start Over</button>
            </div>
            <!-- Row 2: GA Limit and Mint Price -->
            <div style="text-align: center; margin-bottom: 10px;">
              <label for="gaLimit">GA Limit:</label>
              <input type="number" id="gaLimit" value="100" min="0" style="border-radius:5px; padding:5px; margin-right:10px;">
              <label for="mintPriceGlobal">Mint Price:</label>
              <input type="number" id="mintPriceGlobal" value="0.001" step="0.0001" style="border-radius:5px; padding:5px;">
            </div>
            <!-- Row 3: Toolbar -->
            <div id="toolbar" style="text-align: center; margin-bottom:10px;">
              <button data-tool="stage">Stage</button>
              <button data-tool="ga">GA</button>
              <button data-tool="seat">Seat</button>
              <button data-tool="clear">Clear</button>
            </div>
            <!-- Grid Container -->
            <div id="venueGridContainer" style="margin-top: 10px;">
              <!-- Grid will be generated here -->
            </div>
          </div>
          <div class="venue-buttons">
            <button id="saveVenueBtn">Save Venue</button>
            <button id="cancelVenueBtn">Cancel</button>
          </div>
        </div>
      </div>
      
      <!-- Sell Ticket Modal -->
      <div id="sellTicketModal" class="modal">
        <div class="modal-content">
          <span class="close" id="sellTicketClose">&times;</span>
          <h2>Sell Ticket</h2>
          <p>Enter sale price for this ticket:</p>
          <input type="number" id="ticketSalePrice" placeholder="Price in $" style="width:100%; padding:10px; margin:10px 0;">
          <button id="confirmSellTicket" style="width:100%; padding:10px;">Confirm Sell</button>
        </div>
      </div>
      
      <!-- Checkout Modal -->
      <div id="checkoutModal" class="modal">
        <div class="modal-content">
          <span class="close" id="checkoutClose">&times;</span>
          <h2>Checkout</h2>
          <div id="selectedSeatsSummary"></div>
          <div id="finalPrice" style="font-size: 18px; margin-top: 10px;"></div>
          <button id="confirmPurchaseBtn" style="width:100%; padding:10px; margin-top: 20px;">Confirm Purchase</button>
        </div>
      </div>
      
      <!-- Chart Modal -->
      <div id="chartModal" class="modal">
        <div class="modal-content">
          <span class="close" id="chartClose">&times;</span>
          <h2 id="chartTitle">Price Chart</h2>
          <canvas id="priceChart" width="400" height="200"></canvas>
        </div>
      </div>
      
    </div>
  </div>
  
  <!-- Mobile Play Bar (Visible on Mobile Only) -->
  <div class="mobile-play-bar">
    <div class="mobile-player-info">
      <h3>Song 1</h3>
      <p>Artist 1</p>
    </div>
    <div class="mobile-play-controls">
      <button id="prevBtnMobile">&#9198;</button>
      <button id="playBtnMobile">&#9654;</button>
      <button id="nextBtnMobile">&#9197;</button>
    </div>
  </div>
  
  <!-- Login Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close" id="loginModalClose">&times;</span>
      <h2 style="text-align: center;">Login</h2>
      <div style="display: flex; flex-direction: column; align-items: center; margin: 20px 0;">
        <button id="loginButton" style="margin: 10px; padding: 10px 20px; width: 80%;">Login</button>
        <button id="signUpButton" style="margin: 10px; padding: 10px 20px; width: 80%;">Sign Up</button>
        <button id="connectWalletButton" style="margin: 10px; padding: 10px 20px; width: 80%;">Connect Wallet</button>
      </div>
    </div>
  </div>
  
  <script>
    // Helper: show one section only (using unique IDs) and persist active section in localStorage
    function showSection(sectionId) {
      document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
      localStorage.setItem('activeSection', sectionId);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      // On load, check if an active section is saved; if so, display that
      const savedSection = localStorage.getItem('activeSection');
      if (savedSection && document.getElementById(savedSection)) {
        showSection(savedSection);
      } else {
        showSection('explore');
      }
      
      // Desktop Navigation
      document.querySelectorAll('.nav-links a').forEach(link => {
        link.addEventListener('click', () => { showSection(link.getAttribute('data-page')); });
      });
      document.querySelector('.logo').addEventListener('click', () => { showSection('explore'); });
      
      // Mobile Navigation Toggle
      const mobileNavToggle = document.querySelector('.mobile-nav-toggle');
      mobileNavToggle.addEventListener('click', () => {
        const mobileNav = document.querySelector('.mobile-nav');
        mobileNav.style.display = (mobileNav.style.display === 'block') ? 'none' : 'block';
      });
      // Mobile Navigation Links
      document.querySelectorAll('.mobile-nav a').forEach(link => {
        link.addEventListener('click', () => { 
          showSection(link.getAttribute('data-page')); 
          document.querySelector('.mobile-nav').style.display = 'none';
        });
      });
      // Mobile Logo Click: Return to Home Page
      document.querySelector('.mobile-logo').addEventListener('click', () => {
        showSection('explore');
        document.querySelector('.mobile-nav').style.display = 'none';
      });
      // Mobile Profile Click: Open Login Modal
      document.querySelector('.mobile-profile').addEventListener('click', () => {
        document.getElementById('loginModal').style.display = 'block';
      });
      
      // Show login modal when desktop login icon is clicked
      const loginModal = document.getElementById('loginModal');
      const loginModalClose = document.getElementById('loginModalClose');
      document.getElementById('loginBtn').addEventListener('click', () => {
        loginModal.style.display = 'block';
      });
      loginModalClose.addEventListener('click', () => {
        loginModal.style.display = 'none';
      });
      
      // Add basic functionality for login/sign up buttons
      document.getElementById('loginButton').addEventListener('click', () => {
        alert("Login feature not implemented yet.");
      });
      document.getElementById('signUpButton').addEventListener('click', () => {
        alert("Sign Up feature not implemented yet.");
      });
      
      // Connect Wallet functionality (using Phantom Wallet API)
      document.getElementById('connectWalletButton').addEventListener('click', async () => {
        if (window.solana && window.solana.isPhantom) {
          try {
            const resp = await window.solana.connect();
            alert("Connected with wallet: " + resp.publicKey.toString());
            loginModal.style.display = 'none';
          } catch (err) {
            console.error(err);
            alert("Failed to connect wallet.");
          }
        } else {
          alert("Phantom wallet not found. Please install it.");
        }
      });
      
      // PLAY/PAUSE Toggle for Desktop Play Bar
      const playBtn = document.getElementById('playBtn');
      playBtn.addEventListener('click', function(e) {
        this.innerText = (this.innerText.trim() === '▶') ? '⏸' : '▶';
        e.stopPropagation();
      });
      
      // PLAY/PAUSE Toggle for Mobile Play Bar
      const playBtnMobile = document.getElementById('playBtnMobile');
      if(playBtnMobile){
        playBtnMobile.addEventListener('click', function(e) {
          this.innerText = (this.innerText.trim() === '▶') ? '⏸' : '▶';
          e.stopPropagation();
        });
      }
      
      // --- CHART MODAL FUNCTIONS ---
      const chartModal = document.getElementById('chartModal');
      const chartClose = document.getElementById('chartClose');
      const chartTitle = document.getElementById('chartTitle');
      let priceChart;
      const dummyLabels = ['Mar 17','Mar 18','Mar 19','Mar 20','Mar 21','Mar 22'];
      function generateDummyData(basePrice) {
        const data = [];
        for(let i = 0; i < dummyLabels.length; i++){
          const fluctuation = 1 + (Math.random() * 0.2 - 0.1);
          data.push(parseFloat((basePrice * fluctuation).toFixed(8)));
        }
        return data;
      }
      function showPortfolioSongChart(element) {
        const basePrice = parseFloat(element.getAttribute('data-price'));
        chartTitle.textContent = element.querySelector('.item-name').textContent + ' Price Chart';
        chartModal.style.display = 'block';
        const dummyData = generateDummyData(basePrice);
        if(priceChart){ priceChart.destroy(); }
        const ctx = document.getElementById('priceChart').getContext('2d');
        priceChart = new Chart(ctx, {
          type: 'line',
          data: { labels: dummyLabels, datasets: [{ label: 'Price (in USD)', data: dummyData, fill: false, borderColor: 'black', tension: 0.1 }] },
          options: { scales: { y: { beginAtZero: true, ticks: { callback: value => '$' + parseFloat(value.toFixed(8)).toString() } } },
                     plugins: { tooltip: { callbacks: { label: context => '$' + parseFloat(context.parsed.y.toFixed(8)).toString() } } } }
        });
      }
      function showPortfolioTicketChart(element) {
        const floorPrice = parseFloat(element.getAttribute('data-floor'));
        chartTitle.textContent = element.querySelector('.item-name').textContent + ' Price Chart';
        chartModal.style.display = 'block';
        const dummyData = generateDummyData(floorPrice);
        if(priceChart){ priceChart.destroy(); }
        const ctx = document.getElementById('priceChart').getContext('2d');
        priceChart = new Chart(ctx, {
          type: 'line',
          data: { labels: dummyLabels, datasets: [{ label: 'Price (in USD)', data: dummyData, fill: false, borderColor: 'black', tension: 0.1 }] },
          options: { scales: { y: { beginAtZero: true, ticks: { callback: value => '$' + parseFloat(value.toFixed(8)).toString() } } },
                     plugins: { tooltip: { callbacks: { label: context => '$' + parseFloat(context.parsed.y.toFixed(8)).toString() } } } }
        });
      }
      chartClose.addEventListener('click', () => { chartModal.style.display = 'none'; });
      
      // --- Attach Event Listeners to Explore Cards ---
      document.querySelectorAll('.explore-grid .card').forEach(card => {
        card.addEventListener('click', () => {
          const song = card.getAttribute('data-song');
          const marketCap = parseFloat(card.getAttribute('data-marketcap'));
          const basePrice = marketCap / 1e9;
          chartTitle.textContent = song + ' Token Price Chart';
          chartModal.style.display = 'block';
          const dummyData = generateDummyData(basePrice);
          if(priceChart){ priceChart.destroy(); }
          const ctx = document.getElementById('priceChart').getContext('2d');
          priceChart = new Chart(ctx, {
            type: 'line',
            data: { labels: dummyLabels, datasets: [{ label: 'Price (in USD)', data: dummyData, fill: false, borderColor: 'black', tension: 0.1 }] },
            options: { scales: { y: { beginAtZero: true, ticks: { callback: value => '$' + parseFloat(value.toFixed(8)).toString() } } },
                       plugins: { tooltip: { callbacks: { label: context => '$' + parseFloat(context.parsed.y.toFixed(8)).toString() } } } }
          });
        });
      });
      
      // Compute and update token price for each explore card based on market cap
      document.querySelectorAll('.explore-grid .card').forEach(card => {
        let mc = parseFloat(card.getAttribute('data-marketcap'));
        let price = (mc / 1e9).toFixed(2);
        let priceEl = card.querySelector('.price');
        if(priceEl) {
          priceEl.textContent = '$' + price;
        }
      });
      
      // --- Recommended Seating Popup ---
      const recommendationCard = document.getElementById('recommendationCard');
      recommendationCard.addEventListener('click', () => {
        const recPopup = document.getElementById('recommendedSeating');
        recPopup.style.display = (recPopup.style.display === 'block') ? 'none' : 'block';
      });
      document.addEventListener('click', function(e) {
        const recPopup = document.getElementById('recommendedSeating');
        const recCard = document.getElementById('recommendationCard');
        if (recPopup.style.display === 'block' && !recPopup.contains(e.target) && !recCard.contains(e.target)) {
          recPopup.style.display = 'none';
        }
      });
      
      // --- Recommended Seating: Update Total ---
      function updateRecommendedTotal() {
          let total = 0;
          document.querySelectorAll('#recommendedSeating .seat.selected').forEach(s => {
              total += parseFloat(s.getAttribute('data-price')) || 0;
          });
          document.getElementById('recommendedTotalPrice').textContent = "Total: $" + total;
          document.getElementById('recommendedCheckoutBtn').textContent = "Checkout ($" + total + ")";
      }
      const recommendedSeats = document.querySelectorAll('#recommendedSeating .seat.available');
      recommendedSeats.forEach(seat => {
          seat.addEventListener('click', function(e) {
              e.stopPropagation();
              if(seat.classList.contains('selected')){
                  seat.classList.remove('selected');
              } else {
                  if(seat.classList.contains('unavailable')) return;
                  seat.classList.add('selected');
              }
              updateRecommendedTotal();
          });
      });
      
      // --- Events Section ---
      document.querySelectorAll('.event-item').forEach(item => {
        item.addEventListener('click', function() {
          const eventId = item.getAttribute('data-event');
          if (eventId === 'artistA') {
            const details = document.getElementById('artistADetails');
            details.style.display = (details.style.display === 'block') ? 'none' : 'block';
          }
        });
      });
      function updateEventTotal() {
          let total = 0;
          document.querySelectorAll('#artistADetails .seat.selected').forEach(s => {
              total += parseFloat(s.getAttribute('data-price')) || 0;
          });
          document.getElementById('totalPrice').textContent = "Total: $" + total;
          document.getElementById('checkoutBtn').textContent = "Checkout ($" + total + ")";
      }
      const eventSeats = document.querySelectorAll('#artistADetails .seat.available');
      eventSeats.forEach(seat => {
          seat.addEventListener('click', function(e) {
              e.stopPropagation();
              if(seat.classList.contains('selected')){
                  seat.classList.remove('selected');
              } else {
                  if(seat.classList.contains('unavailable')) return;
                  seat.classList.add('selected');
              }
              updateEventTotal();
          });
      });
      const checkoutBtn = document.getElementById('checkoutBtn');
      const checkoutModal = document.getElementById('checkoutModal');
      const checkoutClose = document.getElementById('checkoutClose');
      const selectedSeatsSummary = document.getElementById('selectedSeatsSummary');
      const finalPriceDisplay = document.getElementById('finalPrice');
      checkoutBtn.addEventListener('click', () => {
        const selected = Array.from(document.querySelectorAll('#artistADetails .seat.selected'));
        if(selected.length === 0){
          alert("Please select at least one seat.");
        } else {
          const seatIds = selected.map(seat => seat.getAttribute('data-seat'));
          selectedSeatsSummary.innerHTML = "<p>Selected Seats: " + seatIds.join(', ') + "</p>";
          let total = 0;
          selected.forEach(seat => {
            total += parseFloat(seat.getAttribute('data-price')) || 0;
          });
          finalPriceDisplay.textContent = "Total Price: $" + total;
          checkoutModal.style.display = 'block';
        }
      });
      checkoutClose.addEventListener('click', () => { checkoutModal.style.display = 'none'; });
      document.getElementById('confirmPurchaseBtn').addEventListener('click', () => {
        alert("Purchase successful! (NFT transaction simulated.)");
        document.querySelectorAll('#artistADetails .seat.selected').forEach(seat => seat.classList.remove('selected'));
        checkoutModal.style.display = 'none';
        document.getElementById('totalPrice').textContent = "Total: $0";
        document.getElementById('checkoutBtn').textContent = "Checkout ($0)";
      });
      
      // --- Portfolio Section Action Buttons ---
      const attachActionButtons = (selector, isTicket) => {
        document.querySelectorAll(selector).forEach(item => {
          item.querySelector('.view-chart').addEventListener('click', e => {
            e.stopPropagation();
            if(isTicket){
              showPortfolioTicketChart(item);
            } else {
              showPortfolioSongChart(item);
            }
          });
          item.querySelector('.sell-item').addEventListener('click', e => {
            e.stopPropagation();
            if(isTicket) {
              document.getElementById('sellTicketModal').style.display = 'block';
            } else {
              if(confirm("Do you want to sell this song?")) {
                alert("Song listed for sale (simulated).");
              }
            }
          });
        });
      };
      attachActionButtons('.portfolio-song', false);
      attachActionButtons('.portfolio-ticket', true);
      
      // --- Playlist Modal ---
      const playlistModal = document.getElementById('playlistModal');
      const playlistClose = document.getElementById('playlistClose');
      const playlistModalTitle = document.getElementById('playlistModalTitle');
      const playlistContent = document.getElementById('playlistContent');
      const confirmPlaylistBtn = document.getElementById('confirmPlaylistBtn');
      document.getElementById('createPlaylistBtn').addEventListener('click', () => {
        playlistModalTitle.textContent = "Create Playlist";
        playlistContent.innerHTML = `<div style="padding:10px; text-align:center;">
          <label for="playlistNameInput" style="font-weight:500;">Playlist Name:</label>
          <input type="text" id="playlistNameInput" placeholder="Playlist Name" style="width:90%; padding:8px; margin-top:5px; border-radius:5px; border:1px solid #ccc;">
        </div>`;
        confirmPlaylistBtn.style.display = 'block';
        playlistModal.style.display = 'block';
      });
      document.querySelector('.playlist-item').addEventListener('click', () => {
        playlistModalTitle.textContent = "Playlist 1";
        playlistContent.innerHTML = `<ul style="padding:10px;">
          <li style="padding:10px; border-bottom:2px solid #f7f7f7;">Song 1 - Artist 1</li>
          <li style="padding:10px;">Song 2 - Artist 2</li>
        </ul>`;
        confirmPlaylistBtn.style.display = 'none';
        playlistModal.style.display = 'block';
      });
      playlistClose.addEventListener('click', () => { playlistModal.style.display = 'none'; });
      confirmPlaylistBtn.addEventListener('click', () => {
        const name = document.getElementById('playlistNameInput').value;
        if(name){ alert("Playlist '" + name + "' created (simulated)."); playlistModal.style.display = 'none'; }
        else { alert("Please enter a playlist name."); }
      });
      
      // --- Sell Ticket Modal ---
      const sellTicketModal = document.getElementById('sellTicketModal');
      const sellTicketClose = document.getElementById('sellTicketClose');
      document.getElementById('confirmSellTicket').addEventListener('click', () => {
        const price = document.getElementById('ticketSalePrice').value;
        if(price && parseFloat(price) > 0){
          alert("Ticket listed for sale at $" + price + " (simulated).");
          sellTicketModal.style.display = 'none';
          document.getElementById('ticketSalePrice').value = "";
        } else { alert("Please enter a valid sale price."); }
      });
      sellTicketClose.addEventListener('click', () => { sellTicketModal.style.display = 'none'; });
      
      // --- Venue Creator Feature ---
      const createEventBtn = document.getElementById('createEventBtn');
      const venueCreatorModal = document.getElementById('venueCreatorModal');
      const venueCreatorClose = document.getElementById('venueCreatorClose');
      const cancelVenueBtn = document.getElementById('cancelVenueBtn');
      const resetVenueBtn = document.getElementById('resetVenueBtn');
      createEventBtn.addEventListener('click', () => {
        venueCreatorModal.style.display = 'block';
      });
      venueCreatorClose.addEventListener('click', () => {
        venueCreatorModal.style.display = 'none';
      });
      cancelVenueBtn.addEventListener('click', () => {
        venueCreatorModal.style.display = 'none';
      });
      resetVenueBtn.addEventListener('click', () => {
        document.getElementById("gridRows").value = "5";
        document.getElementById("gridCols").value = "5";
        document.getElementById("gaLimit").value = "100";
        document.getElementById("venueGridContainer").innerHTML = "";
      });
      
      // --- Venue Creator Sandbox Code ---
      let currentTool = null;
      document.querySelectorAll("#toolbar button").forEach(button => {
        button.addEventListener("click", function() {
          currentTool = this.getAttribute("data-tool");
        });
      });
      document.getElementById("createGridBtn").addEventListener("click", function() {
        const rows = parseInt(document.getElementById("gridRows").value);
        const cols = parseInt(document.getElementById("gridCols").value);
        createGrid(rows, cols);
      });
      function createGrid(rows, cols) {
        const container = document.getElementById("venueGridContainer");
        container.innerHTML = "";
        const table = document.createElement("table");
        table.style.borderCollapse = "collapse";
        for (let r = 0; r < rows; r++){
          const tr = document.createElement("tr");
          for (let c = 0; c < cols; c++){
            const td = document.createElement("td");
            td.setAttribute("data-row", r);
            td.setAttribute("data-col", c);
            // Double-click to edit cell label and price
            td.addEventListener("dblclick", function(e) {
              e.stopPropagation();
              let currentLabel = td.querySelector('.seat-label') ? td.querySelector('.seat-label').innerText : td.innerText;
              let newLabel = prompt("Enter seat label:", currentLabel);
              if(newLabel !== null) {
                if(td.querySelector('.seat-label')) {
                  td.querySelector('.seat-label').innerText = newLabel;
                } else {
                  td.innerText = newLabel;
                }
                td.setAttribute("data-seat", newLabel);
              }
              let newPrice = prompt("Enter starting mint price for this seat:", td.getAttribute("data-price") || "");
              if(newPrice !== null) {
                td.setAttribute("data-price", newPrice);
                if(td.querySelector('.seat-price')) {
                  td.querySelector('.seat-price').value = newPrice;
                }
              }
            });
            td.addEventListener("click", function(e) {
              e.stopPropagation();
              if (currentTool) {
                if (currentTool === "clear") {
                  td.innerHTML = "";
                  td.style.backgroundColor = "";
                  td.removeAttribute("data-price");
                } else if (currentTool === "seat") {
                  let rowIndex = parseInt(td.getAttribute("data-row"));
                  let colIndex = parseInt(td.getAttribute("data-col"));
                  let letter = String.fromCharCode(65 + rowIndex);
                  let seatLabel = letter + (colIndex + 1);
                  let mintPrice = document.getElementById("mintPriceGlobal").value;
                  td.innerHTML = `<div class="seat-label">${seatLabel}</div><input type="number" class="seat-price" value="${mintPrice}" style="width:100%; padding:2px; margin-top:2px; box-sizing:border-box;">`;
                  td.setAttribute("data-price", mintPrice);
                  td.setAttribute("data-seat", seatLabel);
                  td.style.backgroundColor = "#ADD8E6";
                } else if (currentTool === "stage") {
                  td.innerHTML = "Stage";
                  td.style.backgroundColor = "#FFD700";
                  td.removeAttribute("data-price");
                } else if (currentTool === "ga") {
                  td.innerHTML = "GA";
                  td.style.backgroundColor = "#90EE90";
                  td.removeAttribute("data-price");
                }
              }
            });
            tr.appendChild(td);
          }
          table.appendChild(tr);
        }
        container.appendChild(table);
      }
    });
  </script>
</body>
</html>
